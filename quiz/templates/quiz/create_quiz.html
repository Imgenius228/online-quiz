{% load static %}
<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>–°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–∫—Ç–æ—Ä–∏–Ω—É</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 0;
    }

    .navbar {
      background: #0d6efd;
      color: white;
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar h2 {
      margin: 0;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      margin-left: 15px;
      font-weight: bold;
    }

    .navbar a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 960px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h2 {
      margin-bottom: 20px;
      color: #0d6efd;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }

    input[type="text"],
    input[type="url"],
    input[type="number"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    .question-block {
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 25px;
      background: #f5f5f5;
    }

    .answers .answer {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .answers input[type="text"] {
      flex: 1;
      margin-right: 10px;
    }

    .btn {
      background: #0d6efd;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
    }

    .btn:hover {
      background: #084fcb;
    }

    .btn-secondary {
      background: #198754;
    }

    .btn-secondary:hover {
      background: #146c43;
    }

    .btn-block {
      display: block;
      width: 100%;
      margin-top: 20px;
    }

    .question-header {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
    }

  </style>
</head>
<body>

<div class="navbar">
  <h2>QuizMaster</h2>
  <div>
    <a href="{% url 'quiz:index' %}">üè† –ì–æ–ª–æ–≤–Ω–∞</a>
    {% if user.is_authenticated %}
      –ü—Ä–∏–≤—ñ—Ç, {{ user.username }} |
      <a href="{% url 'quiz:logout' %}">–í–∏–π—Ç–∏</a>
    {% else %}
      <a href="{% url 'quiz:login' %}">–£–≤—ñ–π—Ç–∏</a>
      <a href="{% url 'quiz:register' %}">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
    {% endif %}
  </div>
</div>

<div class="container">
  <h2>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –≤—ñ–∫—Ç–æ—Ä–∏–Ω–∏</h2>

  <form method="post">
    {% csrf_token %}
    <label for="title">–ù–∞–∑–≤–∞ –≤—ñ–∫—Ç–æ—Ä–∏–Ω–∏:</label>
    <input type="text" name="title" required>

    <label for="description">–û–ø–∏—Å:</label>
    <textarea name="description"></textarea>

    <div class="question-block" data-question-index="0">
      <div class="question-header">–ó–∞–ø–∏—Ç–∞–Ω–Ω—è 1</div>
      <label>–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:</label>
      <input type="text" name="question_0" required>

      <label>–¢–∏–ø –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:</label>
      <select name="question_type_0">
        <option value="text">–¢–µ–∫—Å—Ç</option>
        <option value="image">–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</option>
        <option value="video">–í—ñ–¥–µ–æ</option>
      </select>

      <label>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è/–≤—ñ–¥–µ–æ (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ):</label>
      <input type="url" name="media_0">

      <label>–ß–∞—Å –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (—Å–µ–∫):</label>
      <input type="number" name="time_limit_0" value="30" min="5">

      <div class="answers" id="answers_0">
        <div class="answer">
          <input type="text" name="answer_0_0" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç 1" required>
          <label><input type="radio" name="correct_0" value="0"> –ü—Ä–∞–≤–∏–ª—å–Ω–∞</label>
        </div>
        <div class="answer">
          <input type="text" name="answer_0_1" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç 2" required>
          <label><input type="radio" name="correct_0" value="1"> –ü—Ä–∞–≤–∏–ª—å–Ω–∞</label>
        </div>
      </div>
      <button type="button" class="btn btn-secondary" onclick="addAnswer(0)">‚ûï –î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç</button>
    </div>

    <div id="questions-container"></div>

    <button type="button" class="btn btn-secondary btn-block" onclick="addQuestion()">‚ûï –î–æ–¥–∞—Ç–∏ —â–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è</button>
    <button type="submit" class="btn btn-block">‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–∫—Ç–æ—Ä–∏–Ω—É</button>
  </form>
</div>

<script>
  let questionIndex = 1;

  function addQuestion() {
    const container = document.getElementById('questions-container');
    const q = questionIndex;
    const html = `
      <div class="question-block" data-question-index="${q}">
        <div class="question-header">–ó–∞–ø–∏—Ç–∞–Ω–Ω—è ${q + 1}</div>

        <label>–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:</label>
        <input type="text" name="question_${q}" required>

        <label>–¢–∏–ø –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:</label>
        <select name="question_type_${q}">
          <option value="text">–¢–µ–∫—Å—Ç</option>
          <option value="image">–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</option>
          <option value="video">–í—ñ–¥–µ–æ</option>
        </select>

        <label>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è/–≤—ñ–¥–µ–æ:</label>
        <input type="url" name="media_${q}">

        <label>–ß–∞—Å –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (—Å–µ–∫):</label>
        <input type="number" name="time_limit_${q}" value="30" min="5">

        <div class="answers" id="answers_${q}">
          <div class="answer">
            <input type="text" name="answer_${q}_0" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç 1" required>
            <label><input type="radio" name="correct_${q}" value="0"> –ü—Ä–∞–≤–∏–ª—å–Ω–∞</label>
          </div>
          <div class="answer">
            <input type="text" name="answer_${q}_1" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç 2" required>
            <label><input type="radio" name="correct_${q}" value="1"> –ü—Ä–∞–≤–∏–ª—å–Ω–∞</label>
          </div>
        </div>
        <button type="button" class="btn btn-secondary" onclick="addAnswer(${q})">‚ûï –î–æ–¥–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç</button>
      </div>
    `;
    container.insertAdjacentHTML('beforeend', html);
    questionIndex++;
  }

  function addAnswer(questionId) {
    const container = document.getElementById(`answers_${questionId}`);
    const answerCount = container.children.length;
    const html = `
      <div class="answer">
        <input type="text" name="answer_${questionId}_${answerCount}" placeholder="–í–∞—Ä—ñ–∞–Ω—Ç ${answerCount + 1}" required>
        <label><input type="radio" name="correct_${questionId}" value="${answerCount}"> –ü—Ä–∞–≤–∏–ª—å–Ω–∞</label>
      </div>
    `;
    container.insertAdjacentHTML('beforeend', html);
  }
</script>

</body>
</html>
