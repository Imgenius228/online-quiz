{% extends 'quiz/base.html' %}
{% load static %}
{% block content %}
<div class="max-w-5xl mx-auto py-8">
  <!-- Кнопка створення вікторини -->
  {% if user.is_authenticated and user.is_staff %}
  <div class="flex justify-end mb-6">
    <a href="{% url 'quiz:create_quiz' %}" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-xl shadow">
      ➕ Створити вікторину
    </a>
  </div>
  {% endif %}

  <!-- Пошук -->
  <form method="get" action="" class="mb-6 flex">
    <input type="text" name="q" placeholder="Пошук вікторин..." value="{{ query }}"
      class="w-full px-4 py-2 border rounded-l-xl focus:outline-none">
    <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-xl">Пошук</button>
  </form>

  <!-- Списки викторин -->
  <h2 class="text-xl font-semibold mb-2">Нові вікторини</h2>
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
    {% for quiz in new_quizzes %}
    <div onclick="window.location.href='{% url 'quiz:take_quiz' quiz.id %}'"
      class="cursor-pointer bg-white rounded-xl shadow hover:shadow-md p-4 transition">
      <h3 class="font-bold text-lg">{{ quiz.title }}</h3>
      <p class="text-gray-600 text-sm">{{ quiz.description|truncatewords:15 }}</p>
    </div>
    {% endfor %}
  </div>

  <h2 class="text-xl font-semibold mb-2">Популярні вікторини</h2>
  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
    {% for quiz in popular_quizzes %}
    <div onclick="window.location.href='{% url 'quiz:take_quiz' quiz.id %}'"
      class="cursor-pointer bg-white rounded-xl shadow hover:shadow-md p-4 transition">
      <h3 class="font-bold text-lg">{{ quiz.title }}</h3>
      <p class="text-gray-600 text-sm">{{ quiz.description|truncatewords:15 }}</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

